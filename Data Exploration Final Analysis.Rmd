---
title: "Data Exploration Final Analysis"
author: "Danielle Watkins"
date: "8/6/2022"
output: html_document
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file())
```


Load in packages.
```{r}
library(tidyverse)
library(purrr)
library(lubridate)
library(fixest)
library(vtable)
```

## The Research Question.
Among colleges that predominantly grant bachelorâ€™s degrees, did the release of the Scorecard shift student interest to high-earnings colleges relative to low-earnings ones (as proxied by Google searches for keywords associated with those colleges)?

## The Data:
The Google Trends data consisted of 16 .csv files. To merge these into one data frame for analysis, I used list.files() and map_df() to stack all of these files on top of on another to create a data frame consisting of all trends data. I then cleaned up the data formatting and standardized the measurement of index by subtracting the mean of each index from the index itself, followed by dividing by the standard deviation of the index. I then group by schname and month to take the average standardized index so each school only has 12 observations per year.  

Based on the data I create a variable that indicates whether or not the College Scorecard existed and load in the rest of the data (Scorecard Data and School ID data). Using inner joins I tie all of the data together. At this point I remove duplicate school entries and filter out any schools that do not predominately award bachelor's degrees. Lastly, I select only the variables I will be using and reorder some variables for convenience.

Load in clean data.
```{r}
load("data/clean_trends.RData")
```

## Some assumptions made.
In order categorize and define a "high earning" institution I created a dummy variable (high_income). To account for the changing value of the dollar, I chose to define high earning (TRUE) as the school's median graduate earnings being greater than the top quartile of the median United States household income for that year. Any income below the top quartile of that year's median household income were defined as low earning (FALSE). I used https://fred.stlouisfed.org/series/MEHOINUSA672N for the median household incomes of each year.
